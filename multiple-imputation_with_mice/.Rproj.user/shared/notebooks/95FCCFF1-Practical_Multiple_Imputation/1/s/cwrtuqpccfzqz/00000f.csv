"0",""
"0","#library(mice) #this packages is already above"
"0",""
"0","##3.1) Choose the variables we want to include in the imputation model "
"0","names(data)"
"1"," [1]"
"1"," ""id""          "
"1"," ""sex""         "
"1"," ""age""         "
"1"," ""retired""     "
"1"," ""ohs0""        "
"1"," ""ohs6""        "
"1"," ""ohsdiff""     "
"1"," ""eq5d0""       "
"1"," ""height""      "
"1","
"
"1","[10]"
"1"," ""weight""      "
"1"," ""satisfaction"""
"1"," ""ethnic""      "
"1"," ""imdscore""    "
"1"," ""side""        "
"1"," ""bmi""         "
"1"," ""smoking""     "
"1"," ""occupation""  "
"1","
"
"0","##3.2) Select them"
"0","impmodel_var=c(""age"",""sex"",""ohs0"",""ohsdiff"",""ethnic"",""eq5d0"",""bmi"",""imdscore"",""smoking"") #3.2"
"0",""
"0","#We run the mice code with 0 iterations (it is just for the purpose of this example)"
"0","imp <- mice(data[impmodel_var], m=5, maxit=0, seed=60109)"
"0","#Check the method mice used to impute"
"0","imp$method"
"1","     age "
"1","     sex "
"1","    ohs0 "
"1"," ohsdiff "
"1","  ethnic "
"1","   eq5d0 "
"1","     bmi "
"1","imdscore "
"1"," smoking "
"1","
"
"1","      """" "
"1","      """" "
"1","      """" "
"1","      """" "
"1","""logreg"" "
"1","   ""pmm"" "
"1","   ""pmm"" "
"1","   ""pmm"" "
"1","""logreg"" "
"1","
"
"0","#mice has identified the correct distribution for each variable. But, if you want to change the method used, you can do the following:"
"0",""
"0","meth <- imp$method"
"0",""
"0","# Numeric variables - normal distribution (we are using ""Linear regression, non-Bayesian"" method to impute bmi)"
"0","norm <- c(""bmi"")"
"0","# Numeric variables - non-normal distribution"
"0","nonnorm <- c(""eq5d0"", ""imdscore"")"
"0","# Dichotomous variable"
"0","log <- c(""ethnic"", ""smoking"")"
"0",""
"0","# Turn their methods matrix into the specified imputation models"
"0","meth[norm] <- ""norm.nob"""
"0","meth[nonnorm] <- ""pmm"""
"0","meth[log] <- ""logreg"""
"0",""
"0","imp2 <- mice(data[impmodel_var], m=5, maxit = 0, method = meth, seed=60109)"
"0",""
"0","#3.3) Check that mice is using the specific method"
"0","imp2$method"
"1","       age "
"1","       sex "
"1","      ohs0 "
"1","   ohsdiff "
"1","    ethnic "
"1","     eq5d0 "
"1","       bmi "
"1","  imdscore "
"1","   smoking "
"1","
"
"1","        """" "
"1","        """" "
"1","        """" "
"1","        """" "
"1","  ""logreg"" "
"1","     ""pmm"" "
"1","""norm.nob"" "
"1","     ""pmm"" "
"1","  ""logreg"" "
"1","
"
