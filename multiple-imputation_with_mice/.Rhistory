plot_pattern(missdata, vrb = "all", square = FALSE, rotate = FALSE, cluster = NULL)
#install.packages("VIM")
library(VIM)
aggr(data, labels=names(data), numbers=FALSE, prop=TRUE)
#Visual presentation of missing data pattern
#We are using three different functions to display visually the patterns of the missing data in R:
library(mice)
md.pattern(missdata, plot=TRUE, rotate.names=TRUE)
#install.package("ggmice")
library(ggmice)
plot_pattern(missdata, vrb = "all", square = FALSE, rotate = FALSE, cluster = NULL)
#install.packages("VIM")
library(VIM)
aggr(data, labels=names(data), numbers=FALSE, prop=TRUE)
#Visual presentation of missing data pattern
#We are using three different functions to display visually the patterns of the missing data in R:
library(mice)
md.pattern(missdata, table=FALSE, plot=TRUE, rotate.names=TRUE)
#Visual presentation of missing data pattern
#We are using three different functions to display visually the patterns of the missing data in R:
library(mice)
md.pattern(missdata, plot=TRUE, rotate.names=TRUE)
#install.package("ggmice")
library(ggmice)
plot_pattern(missdata, vrb = "all", square = FALSE, rotate = FALSE, cluster = NULL)
#install.packages("VIM")
library(VIM)
aggr(data, labels=names(data), numbers=FALSE, prop=TRUE)
version
version
version
version
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
#transform/include labels to data
library(dplyr)
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore data
dim(data)
summary(data)
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
#transform/include labels to data
library(dplyr)
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore data
dim(data)
summary(data)
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
names(data)
#transform/include labels to data
library(dplyr)
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore data
dim(data)
summary(data)
#Observe/explore data
dim(data)
#Display the names of variables in the data set.
names(data)
#install.packages("dplyr")
library(dplyr)
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
#Display the names of variables in the data set.
names(data)
#transform/include labels to data
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore data
dim(data)
summary(data)
summary(data)
#list the variables you want to test
test_var_list = c("EQ5D0", "height", "weight", "bmi", "satisfaction", "ethnic", "imdscore")
complete_var  = c("age", "sex", "retired", "ohs0","ohs6", "side") #, "improve") #Q: Since the outcome ("ohsdiff") is a derivation from  "oh0" and "oh6", should we include here?
for (v in 1:length(test_var_list)){
test_var = ifelse(is.na(data[[test_var_list[v]]]), 1,0 )
test = glm(test_var ~ ., data=data[complete_var] )
print(paste("Tested variable: ", test_var_list[v], sep=""))
print(summary(test))   #Check p_value
}
#list the variables you want to test
test_var_list = c("age", "EQ5D0", "height", "weight", "satisfaction", "bmi", "imdscore" )
outcome = "ohsdiff"
for (v in 1:length(test_var_list)){
df = cbind(data[test_var_list[v]],outcome = data[[outcome]])
#df= as.data.frame(df) #remove tibble
test = lm(outcome ~ ., data = df)
par(mfrow = c(2, 2))
plot(test,main=paste(test_var_list[v],"\n",sep=""))
}
#install.packages("dplyr")
library(dplyr)
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
#Display the names of variables in the data set.
names(data)
#transform/include labels to data
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore the data
dim(data)
summary(data)
#install.packages("dplyr")
library(dplyr)
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
#Display the names of variables in the data set.
names(data)
#transform/include labels to data
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore the data
dim(data)
summary(data)
na.test(airquality)
install.packages("na.test")
library(na.test)
install.packages("misty")
library(misty)
library(misty)
na.test(airquality)
na.test(data)
names(airquality)
names(missdata)
na.test(missdata)
#install.packages("dplyr")
library(dplyr)
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
#Display the names of variables in the data set.
names(data)
#transform/include labels to data
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore the data
dim(data)
summary(data)
na.test(data)
na.test(missdata)
names(data)
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired", "ohsdiff", "age", "sex", "side")
missdata <- data[missvars]
missdata <- data[missvars]
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired", "ohsdiff", "age", "sex")
missdata <- data[missvars]
names(data)
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired", "ohsdiff")
missdata <- data[missvars]
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
missdata <- data[missvars]
View(missdata)
View(missdata)
missdata <- data[missvars]
missdata <- data[c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")]
missdata <- data["imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired"]
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
missdata <- data[,missvars]
missdata <- data[,c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")]
missdata <- data[,c('imdscore', 'EQ5D0', 'satisfaction', 'ethnic', 'height', 'weight', 'bmi', 'retired')]
missdata <- data[c('imdscore', 'EQ5D0', 'satisfaction', 'ethnic', 'height', 'weight', 'bmi', 'retired')]
missdata <- data[missvars]
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
missdata <- data[missvars]
missdata <- data[,missvars]
missdata <- data[[missvars]]
#install.packages("dplyr")
library(dplyr)
rm(list=ls())
#install.packages("dplyr")
library(dplyr)
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
#Display the names of variables in the data set.
names(data)
#transform/include labels to data
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore the data
dim(data)
summary(data)
#list the variables you want to test
test_var_list = c("EQ5D0", "height", "weight", "bmi", "satisfaction", "ethnic", "imdscore")
complete_var  = c("age", "sex", "retired", "ohs0","ohs6", "side") #, "improve") #Q: Since the outcome ("ohsdiff") is a derivation from  "oh0" and "oh6", should we include here?
for (v in 1:length(test_var_list)){
test_var = ifelse(is.na(data[[test_var_list[v]]]), 1,0 )
test = glm(test_var ~ ., data=data[complete_var] )
print(paste("Tested variable: ", test_var_list[v], sep=""))
print(summary(test))   #Check p_value
}
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
missdata <- data[missvars]
View(data)
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
missdata <- data[missvars]
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
missdata <- data[missvars]
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
#missdata <- data[missvars]
#Exploring missing pattern with md.pattern() function
#The md.pattern() function shipped with Multivariate Imputation by Chained Equations (MICE) package can be used to produce a table displaying the missing pattern.
#install.package("mice")
library(mice)
md.pattern(data, plot=FALSE)
md.pattern(data, plot=FALSE)
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
missdata <- data[missvars]
#Selecting variables with missing data
missvars <- c("imdscore", "EQ5D0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
#missdata <- data[missvars]
#Exploring missing pattern with md.pattern() function
#The md.pattern() function shipped with Multivariate Imputation by Chained Equations (MICE) package can be used to produce a table displaying the missing pattern.
#install.package("mice")
library(mice)
md.pattern(data, plot=FALSE)
#Visual presentation of missing data pattern
#We are using three different functions to display visually the patterns of the missing data in R:
#library(mice)
#md.pattern(missdata, plot=TRUE, rotate.names=TRUE)
#install.package("ggmice")
library(ggmice)
plot_pattern(data, vrb = "all", square = FALSE, rotate = FALSE, cluster = NULL)
#install.packages("VIM")
library(VIM)
aggr(data, labels=names(data), numbers=FALSE, prop=TRUE)
#library(mice)
md.pattern(missdata, plot=TRUE, rotate.names=TRUE)
#library(mice)
md.pattern(data, plot=TRUE, rotate.names=TRUE)
plot_pattern(data, vrb = "all", square = FALSE, rotate = FALSE, cluster = NULL)
plot_pattern(data, vrb = "all", square = FALSE, rotate = TRUE, cluster = NULL)
#list the variables you want to test
test_var_list = c("EQ5D0", "height", "weight", "bmi", "satisfaction", "ethnic", "imdscore")
complete_var  = c("age", "sex", "retired", "ohs0","ohs6", "side") #, "improve") #Q: Since the outcome ("ohsdiff") is a derivation from  "oh0" and "oh6", should we include here?
for (v in 1:length(test_var_list)){
test_var = ifelse(is.na(data[[test_var_list[v]]]), 1,0 )
test = glm(test_var ~ ., data=data[complete_var] )
print(paste("Tested variable: ", test_var_list[v], sep=""))
print(summary(test))   #Check p_value
}
#install.packages("dplyr")
library(dplyr)
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
#Display the names of variables in the data set.
names(data)
#transform/include labels to data
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore the data
dim(data)
summary(data)
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
#install.packages("dplyr")
library(dplyr)
#Insert the path were "hip.data" is stored
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
#load data
data <- read.csv("hip.csv", sep=',')
#Display the names of variables in the data set.
names(data)
#transform/include labels to data
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore the data
dim(data)
summary(data)
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
getwd()
ls()
getwd(ls())
data <- read.csv("hip.csv", sep=',')
View(data)
names(data)
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore the data
dim(data)
summary(data)
#install.packages("dplyr")
library(dplyr)
#See your working directory
getwd()
#Update your working directory to the folder where your "hip.data" is stored (if it's not this already)
update_wd == "NO"
#install.packages("dplyr")
library(dplyr)
#See your working directory
getwd()
#Update your working directory to the folder where your "hip.data" is stored (if it's not this already)
update_wd = "NO"
if(update_wd == "YES"){
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")
setwd(folder_path)}
#load data
data <- read.csv("hip.csv", sep=',')
#Display the names of variables in the data set.
names(data)
#transform/include labels to data
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore the data
dim(data)
summary(data)
#install.packages("dplyr")
library(dplyr)
#See your working directory
getwd()
#Update your working directory to the folder where your "hip.data" is stored (if it's not this already)
update_wd = "NO"         #"NO" for keeping the current working directory. "YES" yo update. # Include the new path in folder_path variable below.
if(update_wd == "YES"){
folder_path <- ("C:/Users/msanchez/Documents/GitHub/Practical_Imputation/multiple-imputation_with_mice/")  #Remind to use / (NOT \)
setwd(folder_path)}
#load data
data <- read.csv("hip.csv", sep=',')
#Display the names of variables in the data set.
names(data)
#transform/include labels to data
data = data %>%
mutate(sex = factor(sex, levels = c(0,1), labels = c("Male","Female")),
retired = factor(retired, levels = c(0,1), labels = c("Not retired","Retired")),
ethnic = factor(ethnic, levels = c(0,1), labels = c("White","Non white")),
side = factor(side, levels = c(0,1), labels = c("Right","Left")))
#Observe/explore the data
dim(data)
summary(data)
#list the variables you want to test
test_var_list = c("EQ5D0", "height", "weight", "bmi", "satisfaction", "ethnic", "imdscore")
complete_var  = c("age", "sex", "retired", "ohs0","ohs6", "side") #, "improve") #Q: Since the outcome ("ohsdiff") is a derivation from  "oh0" and "oh6", should we include here?
for (v in 1:length(test_var_list)){
test_var = ifelse(is.na(data[[test_var_list[v]]]), 1,0 )
test = glm(test_var ~ ., data=data[complete_var] )
print(paste("Tested variable: ", test_var_list[v], sep=""))
print(summary(test))   #Check p_value
}
test_var_list
complete_var
names(data)
test_var_list = c("EQ5D0", "height", "weight", "bmi", "satisfaction", "ethnic", "imdscore")
complete_var  = c("age", "sex", "retired", "ohsdiff","side") #, "improve")
for (v in 1:length(test_var_list)){
test_var = ifelse(is.na(data[[test_var_list[v]]]), 1,0 )
test = glm(test_var ~ ., data=data[complete_var] )
print(paste("Tested variable: ", test_var_list[v], sep=""))
print(summary(test))   #Check p_value
}
test_var
v
ifelse(is.na(data[[test_var_list[v]]]), 1,0 )
data[[test_var_list[v]]])
data[[test_var_list[v]]]
data[[test_var_list[1]]]
test_var_list
data[["EQ5D0"]]
data[[c("EQ5D0")]]
names9data
names(data)
#list the variables you want to test
test_var_list = c("eq5d0", "height", "weight", "bmi", "satisfaction", "ethnic", "imdscore")
complete_var  = c("age", "sex", "retired", "ohsdiff","side") #, "improve")
for (v in 1:length(test_var_list)){
test_var = ifelse(is.na(data[[test_var_list[v]]]), 1,0 )
test = glm(test_var ~ ., data=data[complete_var] )
print(paste("Tested variable: ", test_var_list[v], sep=""))
print(summary(test))   #Check p_value
}
multi.ttest(data)
install.packages("mtcars")
#list the variables you want to test
test_var_list = c("eq5d0", "height", "weight", "bmi", "satisfaction", "ethnic", "imdscore")
complete_var  = c("age", "sex", "retired", "ohsdiff","side")
for (v in 1:length(test_var_list)){
test_var = ifelse(is.na(data[[test_var_list[v]]]), 1,0 )
test = glm(test_var ~ ., data=data[complete_var] )
print(paste("Tested variable: ", test_var_list[v], sep=""))
print(summary(test))   #Check p_value
}
#Selecting variables with missing data
missvars <- c("imdscore", "eq5d0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
#missdata <- data[missvars]
#Exploring missing pattern with md.pattern() function
#The md.pattern() function shipped with Multivariate Imputation by Chained Equations (MICE) package can be used to produce a table displaying the missing pattern.
#install.package("mice")
library(mice)
md.pattern(data, plot=FALSE)
#Selecting variables with missing data
missvars <- c("imdscore", "eq5d0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
#missdata <- data[missvars]
#Exploring missing pattern with md.pattern() function
#The md.pattern() function shipped with Multivariate Imputation by Chained Equations (MICE) package can be used to produce a table displaying the missing pattern.
#install.package("mice")
library(mice)
md.pattern(data, plot=FALSE)
#Selecting variables with missing data
missvars <- c("imdscore", "eq5d0", "satisfaction", "ethnic", "height", "weight", "bmi", "retired")
missdata <- data[missvars]
#Exploring missing pattern with md.pattern() function
#The md.pattern() function shipped with Multivariate Imputation by Chained Equations (MICE) package can be used to produce a table displaying the missing pattern.
#install.package("mice")
library(mice)
md.pattern(missdata, plot=FALSE)
#Visual presentation of missing data pattern
#We are using three different functions to display visually the patterns of the missing data in R:
#library(mice)
md.pattern(missdata, plot=TRUE, rotate.names=TRUE)
#install.package("ggmice")
library(ggmice)
plot_pattern(missdata, vrb = "all", square = FALSE, rotate = TRUE, cluster = NULL)
#install.packages("VIM")
library(VIM)
aggr(missdata, labels=names(data), numbers=FALSE, prop=TRUE)
library(misty)
isnatll.packages("na.test")
isnatll.packages("misty")
install.packages("misty")
library(misty)
na.test(data)
#list the variables you want to test
test_var_list = c("age", "eq5d0", "height", "weight", "satisfaction", "bmi", "imdscore" )
outcome = "ohsdiff"
for (v in 1:length(test_var_list)){
df = cbind(data[test_var_list[v]],outcome = data[[outcome]])
#df= as.data.frame(df) #remove tibble
test = lm(outcome ~ ., data = df)
par(mfrow = c(2, 2))
plot(test,main=paste(test_var_list[v],"\n",sep=""))
}
#interaction.plot(x.factor = data$age, trace.factor = data$sex, response = data$bmi, fun = mean,  col = c("#0198f9", "#f95801")
#)
#temp = data %>% na.omit() %>% mutate(age_cat = cut(age, breaks = seq(30, 100, by = 10)))
#temp = data %>% mutate(age_cat = cut(age, breaks = seq(30, 100, by = 10)))
#interaction.plot(x.factor = temp$cat_age, trace.factor = temp$sex, response = temp$bmi, fun = mean,  col = c("#0198f9", "#f95801"))
#interaction.plot(data$sex, data$improve, data$bmi)
interaction.plot(data$sex, data$improve, data$ohsdiff)
interaction.plot(missdataa$sex, missdata$improve, missdata$ohsdiff)
interaction.plot(missdata$sex, missdata$improve, missdata$ohsdiff)
table(data$bmi, useNA == "always")
table(data$bmi, useNA = "always")
names(data) #3.1
imp_list=c("eq5d0","height","weight","satisfaction","bmi","ethnic","imdscore")#3.2
methods=c("eq5d0","height","weight","satisfaction","bmi","ethnic","imdscore") #3.3
#####anyadir
